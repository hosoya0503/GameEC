<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<th:block th:replace="~{layout :: head(Top)}"></th:block>
<body>
<th:block th:replace="~{layout :: header}"></th:block>

<main class="container mt-3">
    <div class="alert alert-info" th:if="${message}" th:text="${message}">info message</div>
    <div class="alert alert-danger" th:if="${warning}" th:text="${warning}">info message</div>
    <h3>ゲーム検索</h3>
    <form th:action="@{/game/list}" action="get">
        <div class="md-3">
            <label for="title" class="form-label">タイトル</label>
            <input text="text" class="form-control" id="title" name="Keyword" maxlength="255" >
            <button type="submit" class="btn btn-primary">検索</button>
        </div>
    </form>
    <div class="mx-auto">
        <table class="table table-striped">
            <colgroup>
                <col style="width: 5%">
                <col style="width: 40%">
                <col style="width: 15%">
                <col style="width: 15%">
                <col style="width: 15%">
                <col style="width: 10%">
            </colgroup>
            <thead>
            <tr>
                <th>No.</th>
                <th>タイトル</th>
                <th>メーカー</th>
                <th>発売日</th>
                <th>ジャンル</th>
                <th>コンソール</th>
                <th>モード</th>
                <th>シリーズ</th>
                <th>金額</th>
                <th>データ容量</th>
                <th>言語</th>
                <th>CERO</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="game,info : ${gameList}">
                <td><span th:text="${info.count}"></span></td>
                <td><span th:text="${game.title}"></span></td>
                <td><span th:text="${game.getMaker()}"></span></td>
                <td><span th:text="${game.getReleaseDate()}"></span></td>
                <td><span th:text="${game.getPrice()}"></span></td>
                <td><span th:text="${game.getDataStorage()}"></span></td>
                <td>
                    <a th:href="@{/game/purchase(gameId=${game.id})}" sec:authorize="hasRole('GENERAL')" class="btn btn-primary float-end">購入</a>
                </td>
            </tr>
            </tbody>


        </table>
    </div>
</main>

<th:block th:replace="~{layout :: footer}"></th:block>
<th:block th:replace="~{layout :: script}"></th:block>
</body>
</html>
